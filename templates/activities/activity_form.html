{% extends 'base.html' %}
{% load static %}

{% block title %}{% if object %}Editar{% else %}Nova{% endif %} Atividade - UFC Sobral{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100 relative overflow-hidden hover:shadow-2xl transition-all duration-300">
        <!-- Gradient header based on activity type -->
        <div class="absolute top-0 left-0 right-0 h-2 bg-gradient-to-r {% if object.type == 'WORKSHOP' %}from-purple-500 to-violet-600{% elif object.type == 'SEMINAR' %}from-emerald-500 to-teal-600{% elif object.type == 'RESEARCH' %}from-amber-500 to-orange-600{% elif object.type == 'EXTENSION' %}from-rose-500 to-pink-600{% elif object.type == 'OTHER' %}from-gray-500 to-slate-600{% else %}from-blue-500 to-indigo-600{% endif %}"></div>
        
        <!-- Header -->
        <div class="flex items-center space-x-4 mb-8 pb-4 border-b border-gray-200">
            <div class="text-4xl mr-4">
                {% if object.type == 'WORKSHOP' %}üõ†Ô∏è{% elif object.type == 'SEMINAR' %}üéØ{% elif object.type == 'RESEARCH' %}üî¨{% elif object.type == 'EXTENSION' %}ü§ù{% elif object.type == 'OTHER' %}üìå{% else %}üìö{% endif %}
            </div>
            <div class="flex-1">
                <h2 class="text-3xl font-bold text-gray-900">
                    {% if object %}Editar Atividade{% else %}Nova Atividade{% endif %}
                </h2>
                <p class="text-gray-600 mt-2 font-light">
                    Preencha os detalhes da atividade nos campos abaixo
                </p>
            </div>
        </div>

        <form method="post" class="space-y-8">
            {% csrf_token %}

            <!-- Non-field errors -->
            {% if form.non_field_errors %}
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    {% for error in form.non_field_errors %}
                        <p class="text-red-600 text-sm flex items-center gap-2">
                            <i class="fas fa-times-circle"></i>
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>
            {% endif %}

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Coluna Esquerda -->
                <div class="space-y-6">
                    <!-- T√≠tulo -->
                    <div class="group">
                        <label for="{{ form.title.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                            <i class="fas fa-pencil-alt w-5 h-5 text-gray-500"></i>
                            <span class="ml-2">T√≠tulo</span>
                        </label>
                        {{ form.title }}
                        {% if form.title.errors %}
                            <div class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="fas fa-times w-4 h-4 mr-1"></i>
                                {{ form.title.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Tipo -->
                    <div class="group">
                        <label for="{{ form.type.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                            <i class="fas fa-graduation-cap w-5 h-5 text-gray-500"></i>
                            <span class="ml-2">Tipo</span>
                        </label>
                        {{ form.type }}
                        {% if form.type.errors %}
                            <div class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="fas fa-times w-4 h-4 mr-1"></i>
                                {{ form.type.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Status -->
                    <div class="group">
                        <label for="{{ form.status.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                            <i class="fas fa-check-circle w-5 h-5 text-gray-500"></i>
                            <span class="ml-2">Status</span>
                        </label>
                        {{ form.status }}
                        {% if form.status.errors %}
                            <div class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="fas fa-times w-4 h-4 mr-1"></i>
                                {{ form.status.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Descri√ß√£o -->
                    <div class="group">
                        <label for="{{ form.description.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                            <i class="fas fa-file-alt w-5 h-5 text-gray-500"></i>
                            <span class="ml-2">Descri√ß√£o</span>
                        </label>
                        {{ form.description }}
                        {% if form.description.errors %}
                            <div class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="fas fa-times w-4 h-4 mr-1"></i>
                                {{ form.description.errors.0 }}
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Coluna Direita -->
                <div class="space-y-6">
                    <!-- Datas lado a lado -->
                    <div class="grid grid-cols-2 gap-4">
                        <!-- Data de In√≠cio -->
                        <div class="group">
                            <label for="{{ form.start_date.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                                <i class="fas fa-calendar w-5 h-5 text-gray-500"></i>
                                <span class="ml-2">Data de In√≠cio</span>
                            </label>
                            {{ form.start_date }}
                            {% if form.start_date.errors %}
                                <div class="text-red-500 text-sm mt-1 flex items-center">
                                    <i class="fas fa-times w-4 h-4 mr-1"></i>
                                    {{ form.start_date.errors.0 }}
                                </div>
                            {% endif %}
                        </div>

                        <!-- Data de T√©rmino -->
                        <div class="group">
                            <label for="{{ form.end_date.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                                <i class="fas fa-calendar w-5 h-5 text-gray-500"></i>
                                <span class="ml-2">Data de T√©rmino</span>
                            </label>
                            {{ form.end_date }}
                            {% if form.end_date.errors %}
                                <div class="text-red-500 text-sm mt-1 flex items-center">
                                    <i class="fas fa-times w-4 h-4 mr-1"></i>
                                    {{ form.end_date.errors.0 }}
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Local -->
                    <div class="group">
                        <label for="{{ form.location.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                            <i class="fas fa-map-marker-alt w-5 h-5 text-gray-500"></i>
                            <span class="ml-2">Local</span>
                        </label>
                        {{ form.location }}
                        {% if form.location.errors %}
                            <div class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="fas fa-times w-4 h-4 mr-1"></i>
                                {{ form.location.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Coordenador e Participantes lado a lado -->
                    <div class="grid grid-cols-2 gap-4">
                        <!-- Coordenador -->
                        <div class="group">
                            <label for="{{ form.coordinator.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                                <i class="fas fa-user w-5 h-5 text-gray-500"></i>
                                <span class="ml-2">Coordenador</span>
                            </label>
                            {{ form.coordinator }}
                            {% if form.coordinator.errors %}
                                <div class="text-red-500 text-sm mt-1 flex items-center">
                                    <i class="fas fa-times w-4 h-4 mr-1"></i>
                                    {{ form.coordinator.errors.0 }}
                                </div>
                            {% endif %}
                        </div>

                        <!-- Participantes -->
                        <div class="group">
                            <label for="{{ form.participants.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                                <i class="fas fa-users w-5 h-5 text-gray-500"></i>
                                <span class="ml-2">Participantes</span>
                            </label>
                            {{ form.participants }}
                            {% if form.participants.errors %}
                                <div class="text-red-500 text-sm mt-1 flex items-center">
                                    <i class="fas fa-times w-4 h-4 mr-1"></i>
                                    {{ form.participants.errors.0 }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tags - Full width -->
            <div class="space-y-4">
                <div class="group">
                    <label for="{{ form.tags.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2 group-hover:text-blue-500 transition-colors duration-200 flex items-center">
                        <i class="fas fa-tags w-5 h-5 text-gray-500"></i>
                        <span class="ml-2">Tags</span>
                    </label>
                    
                    <!-- Tags existentes -->
                    {% if object and object.tags.all %}
                        <div class="flex gap-2 flex-wrap mb-3">
                            {% for tag in object.tags.all %}
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800">
                                    {{ tag.name }}
                                </span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    
                    {{ form.tags }}
                    <p class="text-gray-500 text-sm mt-1">Digite as tags separadas por v√≠rgula (ex: programa√ß√£o, web, python)</p>
                    {% if form.tags.errors %}
                        <div class="text-red-500 text-sm mt-1 flex items-center">
                            <i class="fas fa-times w-4 h-4 mr-1"></i>
                            {{ form.tags.errors.0 }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Bot√µes -->
            <div class="flex justify-end space-x-4 mt-8">
                <a href="{% url 'activity_list' %}" class="px-6 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-all duration-200 font-medium flex items-center">
                    <i class="fas fa-times mr-2"></i>
                    Cancelar
                </a>
                <button type="submit" class="px-6 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-blue-400 hover:from-blue-500 hover:to-blue-300 text-white font-medium shadow-lg hover:shadow-xl transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center">
                    <i class="fas fa-check-circle mr-2"></i>
                    {% if object %}Salvar Altera√ß√µes{% else %}Criar Atividade{% endif %}
                </button>
            </div>
        </form>
    </div>
    
    <!-- Footer info -->
    <div class="mt-12 text-center text-sm text-gray-400">
        <p>Universidade Federal do Cear√° - Campus Sobral</p>
        <p class="mt-1">Sistema de Gerenciamento de Atividades</p>
    </div>
</div>
{% endblock %}
